var lang=document.querySelector("html").getAttribute("lang")=="en"?"en":"cs",i18n={cs:{noResults:"Nebyly nalezeny žádné výsledky.",typeSomething:"Zadejte výraz k vyhledání."},en:{noResults:"No results found.",typeSomething:"Please, enter some keywords into the search field."}};function initSearch(){var a=document.getElementById("search-field"),c,b;if(!a)return;c=debounce(function(){getJSON("https://search.ochrance.cz/"+lang+"?q="+encodeURIComponent(a.value),displayResults)},350),b=document.createElement("SPAN"),b.setAttribute("id","searched-for"),document.querySelector("h1").appendChild(b),a.addEventListener("input",c),document.querySelector(".search-form").addEventListener("submit",function(a){a.preventDefault()}),document.getElementById("search-button").addEventListener("click",function(a){a.preventDefault()}),a.focus()}function displayInfo(d,c){var a=document.createDocumentFragment(a),b=document.createElement("P");return c&&b.classList.add("search-"+c),b.innerHTML=d,a.appendChild(b),a}function displayResults(g,c){var d,e,a,b,f;if(c)if(c.hits.hits.length>0){d=document.createDocumentFragment(),e=c.hits.hits.map(displayResult);for(a=0;a<e.length;a++)b=document.createElement("DIV"),b.classList.add("search-result"),b.appendChild(e[a]),d.appendChild(b);document.getElementById("searched-for").innerHTML=": "+document.getElementById("search-field").value,document.getElementById("search-results").innerHTML="",document.getElementById("search-results").appendChild(d)}else f=document.getElementById("search-field").value,f?(document.getElementById("searched-for").innerHTML=": "+document.getElementById("search-field").value,document.getElementById("search-results").innerHTML="",document.getElementById("search-results").appendChild(displayInfo(i18n[lang].noResults))):(document.getElementById("searched-for").innerHTML="",document.getElementById("search-results").innerHTML="",document.getElementById("search-results").appendChild(displayInfo(i18n[lang].typeSomething)))}function displayResult(a){var b=document.createDocumentFragment(),c=document.createElement("A"),d,e,f;return c.setAttribute("href",a._source.url.replace("https://www.ochrance.cz","")),c.innerHTML=a._source.title,d=document.createElement("H2"),d.appendChild(c),e=document.createElement("P"),f=a._source.summary.split(" ").slice(0,20).join(" "),e.innerHTML=f===a._source.summary?a._source.summary:`${f}…`,b.appendChild(d),b.appendChild(e),b}function getJSON(c,b){var a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType="json",a.onload=function(){var c=a.status;c===200?b(null,a.response):b(c,a.response)},a.send()}function debounce(b,c){var a;return function(){const d=()=>{clearTimeout(a),b()};clearTimeout(a),a=setTimeout(d,c)}}document.addEventListener("DOMContentLoaded",function(){initSearch()})